# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ8
## –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è –≥–µ–æ–º–µ—Ç—Ä–∏—è –∏ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- –°—Ç—É–¥–µ–Ω—Ç –§.–ò.–û: **–ú–µ—Ä–∏—á –î–æ—Ä—É–∫ –ö–∞–π–º–∞–∫–¥–∂—ã–æ–≥–ª—É**.
- –°—Ç—É–¥ –ù–æ–∏–µ—Ä: **1032204917**.
- –ì—Ä—É–ø–ø–∞: **–ù–ö–ù–±–¥-01-20**.


***–ó–∞–¥–∞–Ω–∏–µ ‚Ññ1***
- –ù–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –≤—ã—á–∏—Å–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª–∏–Ω–æ–º–∞ –ë–µ—Ä–Ω—à—Ç–µ–π–Ω–∞ ùêµùëñ ùëõ(ùë°) –¥–ª—è –∑–∞–¥–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ùëñ, ùëõ –∏ ùë°. –°–∫–æ–ª—å–∫–æ –ø–æ–ª–∏–Ω–æ–º–æ–≤ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø—Ä–∏ ùëõ = 1, 2, 3, 4, 5, 6? –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –∏—Ö –≥—Ä–∞—Ñ–∏–∫–∏ –∏ —Å–≤–µ—Ä—å—Ç–µ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ –∏–∑ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏.


```python
import numpy as np
%matplotlib inline
from matplotlib import pyplot as plt
import math
import functools
import os
import subprocess
```


```python
@functools.lru_cache
def C(n, i):
    """–ß–∏—Å–ª–æ —Å–æ—á–µ—Ç–∞–Ω–∏–π –∏–∑ n –ø–æ k"""
    return math.comb(n, i)

def Bezier_curve(t, p):
    n = len(p)
    res = []
    for _t in t:
        b_curve = np.zeros_like(p[0])
        for i in range(0, n, 1):
            b_curve += Bern_pol(i=i, n=n-1, t=_t)*p[i]
        res.append(b_curve)
    return np.array(res)

def Bern_pol(i, n, t):
    return C(n=n, i=i) * (1 - t)**(n - i) * (t**i)

P = [(1, 1), (5, 3), (1, 3), (2, 2)]
P = np.array(P, dtype=np.float64)
T = np.linspace(0, 1, 100) 

fig01 = plt.figure(1, figsize=(10, 3))
ax01 = fig01.add_subplot(1,1,1)

n = 5
for i in range(n+1):
    ax01.plot(T, Bern_pol(i, n, T), markersize=6, markevery=10, label=f'$B^{{{i}}}_{{{n}}}$')

ax01.legend(ncol=2)
```




    <matplotlib.legend.Legend at 0x29bdf031fd0>




    
![png](output_3_1.png)
    


***–ó–∞–¥–∞–Ω–∏–µ ‚Ññ2***
- –ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è –≤—ã—á–∏—Å–ª—è–µ—Ç —Ç–æ—á–∫–∏ –∫—Ä–∏–≤–æ–π –ë–µ–∑—å–µ –ª—é–±–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ —Å –ø–æ–º–æ—â—å—é –ø–æ–ª–∏–Ω–æ–º–æ–≤ –ë–µ—Ä–Ω—à—Ç–µ–π–Ω–∞. –ü–æ—Ä—è–¥–æ–∫ –∫—Ä–∏–≤–æ–π –¥–æ–ª–∂–µ–Ω –≤—ã—á–∏—Å–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ—á–µ–∫, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è. –°–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å —Ç–∞–±–ª–∏—Ü–µ–π 5 –∏ —Å —Ä–∏- —Å—É–Ω–∫–æ–º 19. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç–æ—á–µ–∫: (1, 1), (2, 2), (4, 2), (5, 1), (2, 0), (1, 1).


```python
T_1 = np.linspace(0.1, 0.9, 9)
P = [(1, 1), (2, 2), (4, 2), (5, 1), (2, 0), (1, 1)]
P = np.array(P, dtype=np.float64)
Bezier_curve(T_1, P)
fig = plt.figure(0)
ax = fig.add_subplot(1, 1, 1)
ax.plot(*zip(*P),
        markersize=5,
        marker='o',
        lw=1.0,
        markeredgecolor='k',
        markerfacecolor='k',
        ls='--',
        label='–û–ø–æ—Ä–Ω—ã–µ —Ç–æ—á–∫–∏')
ax.plot(*Bezier_curve(T, P).T, label='–ö—Ä–∏–≤–∞—è –ë–µ–∑—å–µ', color='blue')
ax.plot(*Bezier_curve(T_1, P).T,
        linestyle='',
        marker='o',
        mfc='red',
        mec='red',
        ms=7)
ax.set_xlabel('$x$')
ax.set_ylabel('$y$')
ax.legend(loc='best')
```




    <matplotlib.legend.Legend at 0x29be12ece50>




    
![png](output_5_1.png)
    


***–ó–∞–¥–∞–Ω–∏–µ ‚Ññ3***
- –î–ª—è –∫—Ä–∏–≤—ã—Ö ùêµ(2, ùë°), ùêµ(3, ùë°), ùêµ(4, ùë°) –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∞—Ç—Ä–∏—á–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã. –°—Ä–∞–≤–Ω–∏—Ç–µ –±—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –∑–∞–¥–∞–Ω–∏—è ‚Ññ2 —Å –º–∞—Ç—Ä–∏—á–Ω—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–º (–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –¥–ª—è ùëõ = 2, 3, 4).


```python
def B2(t, p):
    t_matrix = np.vstack([t**2, t, np.ones(len(t))]).T
    c_matrix = np.array([
         [1, -2, 1],
        [-2, 2, 0],
        [1, 0, 0]
    ])
    A = np.dot(t_matrix, c_matrix)
    return  np.dot(A, p)

def B3(t, p):
    t_matrix = np.vstack([t**3, t**2, t, np.ones(len(t))]).T
    c_matrix = np.array([
        [-1, 3, -3, 1],
        [3, -6, 3, 0],
        [-3, 3, 0, 0],
        [0, 0, 0, 0]
    ])
    A = np.dot(t_matrix, c_matrix)
    return  np.dot(A, p)

def B4(t, p):
    t_matrix = np.vstack([ t**4, t**3, t**2, t, np.ones(len(t))]).T
    c_matrix = np.array([
       [-1, -4, 6, -4, 1],
        [-4, 12, -12, 4, 0],
        [6, -12, 6, 0, 0],
        [-4, -4, 0, 0, 0],
        [1, 0, 0, 0, 0]
    ])
    A = np.dot(t_matrix, c_matrix)
    return  np.dot(A, p)
```

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–ª—è –∫—Ä–∏–≤—ã—Ö –ë–µ–∑—å–µ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞


```python
T = np.linspace(0, 1, 100)
P = np.array([(1, 1, 1), (5, 3, 1), (1, 3, 1)], dtype=np.float64)
%timeit B2(T, P).T
```

    13.3 ¬µs ¬± 95.9 ns per loop (mean ¬± std. dev. of 7 runs, 100,000 loops each)
    


```python
%timeit Bezier_curve(T, P).T
```

    999 ¬µs ¬± 8 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1,000 loops each)
    

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–ª—è –∫—Ä–∏–≤—ã—Ö –ë–µ–∑—å–µ —Ç—Ä–µ—Ç—å–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞


```python
P = np.array([(1, 1, 1), (5, 3, 1), (1, 3, 1), (2, 2, 1)], dtype=np.float64)
%timeit B3(T, P).T
```

    20.9 ¬µs ¬± 123 ns per loop (mean ¬± std. dev. of 7 runs, 10,000 loops each)
    


```python
%timeit Bezier_curve(T, P).T
```

    1.23 ms ¬± 9.97 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1,000 loops each)
    

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–ª—è –∫—Ä–∏–≤—ã—Ö –ë–µ–∑—å–µ 4 –ø–æ—Ä—è–¥–∫–∞


```python
P = np.array([(1, 1, 1), (5, 3, 1), (1, 3, 1), (2, 2, 1), (4, 3, 1)], dtype=np.float64)
%timeit B4(T, P).T
```

    27.9 ¬µs ¬± 243 ns per loop (mean ¬± std. dev. of 7 runs, 10,000 loops each)
    


```python
%timeit Bezier_curve(T, P).T
```

    1.47 ms ¬± 35.2 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1,000 loops each)
    

***–ó–∞–¥–∞–Ω–∏–µ ‚Ññ4***
- –†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫—Ä–∏–≤–æ–π –ë–µ–∑—å–µ –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É –¥–µ –ö–∞—Å—Ç–µ–ª—å–∂–æ. –ù–∞—Ä–∏—Å—É–π—Ç–µ –æ–ø–æ—Ä–Ω—ã–µ –ª–æ–º–∞–Ω–Ω—ã–µ, —Ç–æ—á–∫–∏ –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã—á–∏—Å–ª—è–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º –¥–µ –ö–∞—Å—Ç–µ–ª—å–∂–æ.


```python
def De_Casteljau(t, P):
    N = len(P)
    interm_results = []
    interm_results.append(P)
    for step in range(0, N, 1):
        points = []
        current_points = interm_results[step]
        for i in range(0, len(current_points)-1, 1):
            new_point = (1-t) * current_points[i] + t * current_points[i+1]
            points.append(new_point)
        interm_results.append(points)
    return interm_results

def De_Casteljau_point(t, P):
    N = len(P)
    current_points = P
    for step in range(0, N - 1, 1):
        points = []
        for i in range(0, len(current_points) - 1, 1):
            new_point = (1 - t) * current_points[i] + t * current_points[i + 1]
            if (step == N - 2):
                return new_point
            points.append(new_point)
        current_points = points

points = [(1, 1), (5, 3), (1, 3), (2, 2)]
points = np.array(points, dtype=np.float64)
T = np.linspace(0, 1, 100)
dcr = De_Casteljau(0.5, points)
dcr_points = np.array([De_Casteljau_point(t, points) for t in T]).T

fig = plt.figure(5)
ax = fig.add_subplot(1, 1, 1)

step = 0
for interm_points in dcr:
    _p = np.array(interm_points).T
    ax.plot(*_p,
            marker='o',
            ms=8,
            label='–û–ø–æ—Ä–Ω–∞—è –ª–æ–º–∞–Ω–Ω–∞—è –Ω–∞ —à–∞–≥–µ {}'.format(step))
    step += 1

ax.plot(*dcr_points, label='–ö—Ä–∏–≤–∞—è –ë–µ–∑—å–µ')
ax.legend(loc='best')
ax.set_aspect('equal')
```


    
![png](output_18_0.png)
    


***–ó–∞–¥–∞–Ω–∏–µ ‚Ññ5***
- –°–¥–µ–ª–∞–µ—Ç–µ –∞–Ω–∏–º–∞—Ü–∏—é –¥–≤–∏–∂–µ–Ω–∏—è –æ–ø–æ—Ä–Ω—ã—Ö –ª–æ–º–∞–Ω–Ω—ã—Ö –∏–∑ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –¥–µ –ö–∞—Å—Ç–µ–ª—å–∂–æ.


```python
points = [(1, 1), (5, 3), (1, 3), (2, 2)]
points = np.array(points, dtype=np.float64)

FOLDER = 'animation_frames'
try:
    os.mkdir(FOLDER)
except FileExistsError:
    pass

fig = plt.figure(5)
ax = fig.add_subplot(1, 1, 1)
ax.set_aspect('equal')
frames = 600
T = np.linspace(0, 1, frames)
dcr_points = np.array([De_Casteljau_point(t, points) for t in T]).T
counter = 0
for i in T:
    ax.clear()
    dcr = De_Casteljau(i, points)
    final_points_X = dcr_points[0][0:counter + 1]
    final_points_Y = dcr_points[1][0:counter + 1]

    ax.plot(final_points_X, final_points_Y)

    for interm_points in dcr:
        _p = np.array(interm_points).T
        ax.plot(*_p, marker='o', ms=4, color='black', lw=0.5)

    if (counter != 0):
        ax.plot(final_points_X[counter],
                final_points_Y[counter],
                ls='',
                marker='o',
                ms=4,
                mfc='red',
                mec='red')
    fig.savefig('{0}/{1:03d}.png'.format(FOLDER, counter),
                dpi=300,
                format='png')
    counter += 1
```


    
![png](output_20_0.png)
    



```python
from PIL import Image
frame_folder = './animation_frames'
frame_files = sorted([f for f in os.listdir(frame_folder) if f.endswith('.png')]) 
frames = []

for file_name in frame_files:
    image = Image.open(os.path.join(frame_folder, file_name))
    frames.append(image)

output_gif = 'output.gif'
frame_duration = 100  
frames[0].save(output_gif, save_all=True, append_images=frames[1:], duration=frame_duration, loop=0)
```

[gif](http://localhost:8888/edit/output.gif)


```python

```
